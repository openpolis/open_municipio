Introduction
============

This application is responsible for the population of the news-cache.

The news-cache keeps a log of all **important** events of the project, as they happen.

Events are generated by activities in the application. Both institutional and community activities are tracked.

Institution activities are generated by moderators describing, tagging or validating acts, 
or by automatic imports of sittings activity (votings, interventions, ...).

Community activities are generated by logged users commenting and voting and by politicians, 
when, as logged users, they describe an act.

The cache is needed to speed up the generation of a textual news related to these events, and to allow the 
application to generate rapidly and without too many queries and computations, the correct set of news for a given **context**.

**Contexts** may be a page in the application or the alert mail that the system sends to those users that activated the monitoring functionality.




Implementation details
======================
The cache takes the form of a table, where both the textual representation of the news and the parameters needed to fetch the correct set of news are stored.

Records are generated in response to `signals`_ sent by the application.

Being a cache, it should be possible to erase it and regenerate it completely, starting from data already in the database.

For this reason, signal handlers should call record generating functions, so that these functions could be invoked by
management commands, whenever they are issued to re-generate the cache.

One event - Many news
=====================
An example: whenever an act is signed by some politician, a different set of news, with different point of views (or scope), should be generated.

* a news related to the Act, with low priority (3)
* a news related to the Politician, with higher priority (2)
* two news related to the Tag and Location the Act is tagged with, with low priority (3)


The scope identifies the object the news is related to. 
Having different news for different scopes has many advantages:

* It will be possible, while visualizing a Politician page, to get all the news related to that politician
* The textual representation of the news varies, with different scopes

In order to abstract as much as possible from the project's details, this is going to be implemented through generic relations, 
so a news has a generic relation to the object's instance it is related to.


.. _`signals`: https://docs.djangoproject.com/en/dev/topics/signals/ 
